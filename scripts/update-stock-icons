#! /bin/bash
tab="    "
(
  echo "# autogenerated"
  echo "(window.MakeApp ||= {}).imageDirectories: {"

  for folder in glyphish/icons glyphish/mini-icons; do
    echo "${tab}'$folder': ["
    path="web/static/stock/$folder"
    for file in $(cd $path; ls -1 *.png | sort -n); do
      echo "${tab}${tab}{ f: '${file}' }"
    done
    echo "${tab}]"
  done

  echo "}"
) | coffee -c -s >web/static/designer-image-directories.js
