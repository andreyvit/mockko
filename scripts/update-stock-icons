#! /bin/bash
tab="    "
(
  echo "# autogenerated"
  echo "(window.MakeApp ||= {}).imageDirectories: {"

  for folder in glyphish/icons glyphish/mini-icons iphone-accessories; do
    echo "${tab}'$folder': ["
    path="web/static/stock/$folder"
    for file in $(cd $path; ls -1 *.png | sort -n); do
      size="$(scripts/get-image-size.py "$path/$file")"
      echo "${tab}${tab}{ f: '${file}', s: '${size}' }"
      echo "${size} ${file}" >&2
    done
    echo "${tab}]"
  done

  echo "}"
) | coffee -c -s >web/static/designer-image-directories.js
